{% extends "base.html" %}
{% load static %}

{% block title %}
Kiểm tra thông tin đơn hàng
{% endblock %}

{% block content %}

<!-- breadcrumb start -->
<div class="breadcrumb-section">
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <div class="page-title">
          <h2>Kiểm tra thông tin đơn hàng</h2>
        </div>
      </div>
      <div class="col-sm-6">
        <nav aria-label="breadcrumb" class="theme-breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Trang chủ</a></li>
            <li class="breadcrumb-item active">Kiểm tra thông tin đơn hàng</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</div>
<!-- breadcrumb End -->

<!-- section start -->
<section class="section-b-space">
  <div class="container">
    <div class="checkout-page">
      <div class="checkout-form">
        <form action="{% url 'place_order' %}" method="POST">
          {% csrf_token %}
          <div class="row">
            <div class="col-lg-6 col-sm-12 col-xs-12">
              <div class="checkout-title">
                <h3>Xem lại thông tin đơn hàng và thực hiện thanh toán</h3>
              </div>
              <div class="row check-out">
                <div class="card">
                  <h5 class="card-header" style="background-color: white; font-weight: bold; font-size: 18px;">Thông tin giao hàng</h5>
                  <div class="card-body">
                    <h5 class="card-title">Họ và tên: </h5>
                    <p class="card-text">{{ order.full_name }}</p>

                    <h5 class="card-title">Số điện thoại: </h5>
                    <p class="card-text">{{ order.phone_number }}</p>

                    <h5 class="card-title">Địa chỉ (Số nhà, Tên đường): </h5>
                    <p class="card-text">{{ order.address }}</p>

                    <h5 class="card-title">Xã / Phường: </h5>
                    <p class="card-text">{{ order.commune }}</p>

                    <h5 class="card-title">Quận / Huyện: </h5>
                    <p class="card-text">{{ order.district }}</p>

                    <h5 class="card-title">Tỉnh / Thành phố: </h5>
                    <p class="card-text">{{ order.city }}</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-sm-12 col-xs-12">
              <div class="checkout-details">
                <div class="order-box">
                  <div class="title-box">
                    <div>Sản phẩm <span>Giá</span></div>
                  </div>
                  <ul class="qty">
                    {% for item in cart_items %}
                    <li style="font-size: 15px; color: #232323; line-height: 20px;">
                      {{ item.cart_item.product.product_name }}<br>
                      <p style="font-size: 14px; color: #777; line-height: 20px;">
                        Số lượng : {{ item.cart_item.quantity }}<br>
                        {% if item.sorted_variations %}
                        {% for variation in item.sorted_variations %}
                        {{ variation.variation_category }} : {{ variation.variation_value }}<br>
                        {% endfor %}
                        {% endif %}
                      </p>
                      <span style="position: absolute; top: 0; right: 0;">
                        {% if item.cart_item.product.discount_price %}
                        {{ item.cart_item.product.formatted_discount_price }}/cái
                        {% else %}
                        {{ item.cart_item.product.formatted_price }}/cái
                        {% endif %}
                      </span>
                    </li>
                    {% endfor %}
                  </ul>
                  <ul class="sub-total">
                    <li>Tạm tính <span class="count">{{ formatted_total }}</span></li>
                    <li>Phí vận chuyển <span class="count">{{ formatted_shipping_fee }}</span></li>
                    <li>Tổng tiền phải trả <span class="count">{{ formatted_grand_total }}</span></li>
                  </ul>
                  <div class="payment-box" style="display: flex; justify-content: space-between;">
                    <div><a href="{% url 'checkout' %}" class="btn-solid btn">Quay lại</a></div>
                    <div><button type="submit" class="btn-solid btn">Tiếp tục</button></div>
                  </div>
                </div>
              </div>
            </div>
        </form>
      </div>
    </div>
  </div>
</section>
<!-- section end -->

{% endblock %}